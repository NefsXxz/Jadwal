<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PR Manager - MAN BARITO UTARA</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #f72585;
            --success: #4cc9f0;
            --warning: #f8961e;
            --danger: #e63946;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --gradient: linear-gradient(135deg, #4361ee, #3a0ca3);
            --gradient-accent: linear-gradient(135deg, #f72585, #b5179e);
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            --radius: 16px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Header Styles */
        header {
            background: var(--gradient);
            color: white;
            padding: 25px 30px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 200%;
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(30deg);
        }

        .school-info {
            position: relative;
            z-index: 1;
        }

        .school-info h1 {
            font-size: 2.2rem;
            margin-bottom: 5px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .school-info p {
            font-size: 1.1rem;
            opacity: 0.9;
            font-weight: 300;
        }

        .header-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .notification-status {
            font-size: 0.9rem;
            padding: 8px 15px;
            border-radius: 50px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background-color: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
        }

        .notification-enabled {
            background-color: rgba(76, 201, 240, 0.3);
        }

        .notification-disabled {
            background-color: rgba(230, 57, 70, 0.3);
        }

        .btn {
            background: var(--gradient-accent);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 4px 15px rgba(247, 37, 133, 0.3);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(247, 37, 133, 0.4);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid white;
            box-shadow: none;
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Stats Section */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px 20px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            text-align: center;
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: var(--primary);
        }

        .stat-card:nth-child(2)::before {
            background: var(--warning);
        }

        .stat-card:nth-child(3)::before {
            background: var(--accent);
        }

        .stat-card h3 {
            font-size: 2.5rem;
            margin-bottom: 5px;
            color: var(--primary);
            font-weight: 700;
        }

        .stat-card p {
            color: var(--gray);
            font-size: 0.95rem;
            font-weight: 500;
        }

        /* Tabs Navigation */
        .tabs {
            display: flex;
            margin-bottom: 25px;
            background: white;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .tab {
            flex: 1;
            text-align: center;
            padding: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .tab.active {
            background: var(--gradient);
            color: white;
        }

        .tab:not(.active):hover {
            background: rgba(67, 97, 238, 0.05);
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: white;
        }

        /* Card Styles */
        .card {
            background: white;
            padding: 30px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        h2 {
            color: var(--primary);
            margin-bottom: 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.5rem;
        }

        h2 i {
            color: var(--accent);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Form Styles */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        input, select, textarea {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        .btn-submit {
            background: var(--gradient);
            width: 100%;
            padding: 16px;
            font-size: 1.1rem;
            margin-top: 10px;
        }

        /* Task List Styles */
        .task-list {
            list-style-type: none;
        }

        .task-item {
            background: white;
            border-left: 5px solid var(--primary);
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .task-item:hover {
            transform: translateX(5px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
        }

        .task-info h3 {
            margin-bottom: 8px;
            color: var(--dark);
            font-size: 1.2rem;
        }

        .task-meta {
            font-size: 0.9rem;
            color: var(--gray);
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }

        .task-actions {
            display: flex;
            gap: 10px;
        }

        .btn-delete {
            background: var(--danger);
            padding: 10px 15px;
            font-size: 0.9rem;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--gray);
        }

        .empty-state i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: #dee2e6;
        }

        .urgent {
            border-left-color: var(--danger);
        }

        .soon {
            border-left-color: var(--warning);
        }

        .pr-details {
            margin-top: 12px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 8px;
            font-size: 0.95rem;
            border-left: 3px solid var(--success);
        }

        .today-highlight {
            background: linear-gradient(135deg, #fff, #e3f2fd);
            border: 1px solid #bbdefb;
        }

        /* Schedule Table */
        .schedule-container {
            overflow-x: auto;
            border-radius: var(--radius);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .schedule-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: var(--radius);
            overflow: hidden;
        }

        .schedule-table th, .schedule-table td {
            border: 1px solid #e9ecef;
            padding: 14px 10px;
            text-align: center;
        }

        .schedule-table th {
            background: var(--gradient);
            color: white;
            font-weight: 500;
            position: sticky;
            top: 0;
        }

        .schedule-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        .schedule-table tr:hover {
            background-color: #e3f2fd;
        }

        .time-header {
            font-weight: 600;
            background: var(--secondary);
            color: white;
        }

        .break-row {
            background: #e9ecef !important;
            font-weight: bold;
            text-align: center;
        }

        .subject-cell {
            position: relative;
        }

        .teacher-name {
            font-size: 0.8rem;
            color: var(--gray);
            margin-top: 5px;
        }

        .current-class {
            background-color: rgba(248, 150, 30, 0.2) !important;
            border: 2px solid var(--warning);
        }

        /* Footer */
        footer {
            text-align: center;
            margin-top: 40px;
            color: var(--gray);
            font-size: 0.9rem;
            padding: 20px;
            border-top: 1px solid #dee2e6;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header-controls {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .task-item {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .task-actions {
                margin-top: 15px;
                width: 100%;
                justify-content: flex-end;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .schedule-table {
                font-size: 0.8rem;
            }
            
            .schedule-table th, .schedule-table td {
                padding: 8px 5px;
            }
            
            .school-info h1 {
                font-size: 1.8rem;
            }
        }

        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 8px;
        }

        .badge-primary {
            background: rgba(67, 97, 238, 0.1);
            color: var(--primary);
        }

        .badge-warning {
            background: rgba(248, 150, 30, 0.1);
            color: var(--warning);
        }

        .badge-danger {
            background: rgba(230, 57, 70, 0.1);
            color: var(--danger);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="school-info">
                <h1>
                    <i class="fas fa-graduation-cap"></i>
                    MAN BARITO UTARA
                </h1>
                <p>Kelas X.9 ATAS - Semester 1 TP 2025/2026</p>
                
                <div class="header-controls">
                    <div id="notificationStatus" class="notification-status notification-disabled">
                        <i class="fas fa-bell"></i> 
                        <span>Notifikasi: Belum Diizinkan</span>
                    </div>
                    
                    <div>
                        <button id="testNotification" class="btn btn-outline">
                            <i class="fas fa-bell"></i> Tes Notifikasi
                        </button>
                        <button id="tutorialBtn" class="btn">
                            <i class="fas fa-question-circle"></i> Cara Pakai
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <div class="stats">
            <div class="stat-card">
                <h3 id="totalTasks">0</h3>
                <p>Total PR</p>
            </div>
            <div class="stat-card">
                <h3 id="urgentTasks">0</h3>
                <p>PR Mendesak</p>
            </div>
            <div class="stat-card">
                <h3 id="todayTasks">0</h3>
                <p>PR Hari Ini</p>
            </div>
        </div>

        <div class="tabs">
            <div class="tab active" data-tab="schedule">
                <i class="fas fa-calendar-alt"></i> Jadwal Pelajaran
            </div>
            <div class="tab" data-tab="reminder">
                <i class="fas fa-tasks"></i> Pengingat PR
            </div>
        </div>

        <div class="tab-content active" id="schedule">
            <div class="card">
                <h2><i class="fas fa-table"></i> Jadwal Pelajaran X.9 ATAS</h2>
                <div class="schedule-container">
                    <table class="schedule-table" id="classSchedule">
                        <!-- Jadwal akan diisi oleh JavaScript -->
                    </table>
                </div>
            </div>
        </div>

        <div class="tab-content" id="reminder">
            <div class="card">
                <h2><i class="fas fa-plus-circle"></i> Tambah PR Baru</h2>
                <form id="taskForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="day"><i class="fas fa-calendar-day"></i> Hari</label>
                            <select id="day" required>
                                <option value="">Pilih Hari</option>
                                <option value="Senin">Senin</option>
                                <option value="Selasa">Selasa</option>
                                <option value="Rabu">Rabu</option>
                                <option value="Kamis">Kamis</option>
                                <option value="Jumat">Jumat</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="subject"><i class="fas fa-book"></i> Mata Pelajaran</label>
                            <select id="subject" required>
                                <option value="">Pilih Mata Pelajaran</option>
                                <!-- Opsi mata pelajaran akan diisi oleh JavaScript -->
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="teacher"><i class="fas fa-chalkboard-teacher"></i> Nama Guru</label>
                            <input type="text" id="teacher" readonly>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="taskDescription"><i class="fas fa-clipboard-list"></i> Detail Tugas</label>
                        <textarea id="taskDescription" placeholder="Contoh: Mengerjakan soal halaman 1-5, membuat rangkuman bab 2, dll." required></textarea>
                    </div>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="dueDate"><i class="fas fa-calendar-check"></i> Tanggal Pengumpulan</label>
                            <input type="date" id="dueDate" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="dueTime"><i class="fas fa-clock"></i> Waktu Pengumpulan</label>
                            <input type="time" id="dueTime" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="priority"><i class="fas fa-exclamation-circle"></i> Prioritas</label>
                            <select id="priority">
                                <option value="normal">Normal</option>
                                <option value="soon">Segera</option>
                                <option value="urgent">Mendesak</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="reminderTime"><i class="fas fa-bell"></i> Ingatkan Saya</label>
                            <select id="reminderTime">
                                <option value="1">1 menit (testing)</option>
                                <option value="2">2 menit (testing)</option>
                                <option value="15">15 menit sebelumnya</option>
                                <option value="30">30 menit sebelumnya</option>
                                <option value="60">1 jam sebelumnya</option>
                            </select>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-submit">
                        <i class="fas fa-plus"></i> Tambah Pengingat PR
                    </button>
                </form>
            </div>
            
            <div class="card">
                <h2><i class="fas fa-list-check"></i> Daftar PR Saya</h2>
                <ul id="taskList" class="task-list">
                    <li class="empty-state">
                        <i class="fas fa-inbox"></i>
                        <h3>Belum ada PR</h3>
                        <p>Tambahkan PR pertama Anda untuk memulai</p>
                    </li>
                </ul>
            </div>
        </div>
        
        <footer>
            <p><i class="fas fa-copyright"></i> 2025 MAN BARITO UTARA - Aplikasi Pengingat PR & Jadwal Pelajaran</p>
        </footer>
    </div>

    <script>
        // Data jadwal pelajaran
        const scheduleData = {
            days: ['Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat'],
            times: [
                '06:30 - 07:15',
                '07:15 - 08:00', 
                '08:00 - 08:45',
                '08:45 - 09:30',
                '09:30 - 09:45',
                '09:45 - 10:30',
                '10:30 - 11:15',
                '11:15 - 11:30',
                '11:30 - 12:15',
                '12:15 - 13:00',
                '13:00 - 13:45',
                '13:45 - 14:30',
                '14:30 - 14:45',
                '14:45 - 15:30',
                '15:30 - 16:15'
            ],
            subjects: [
                // Senin
                [
                    { subject: 'Upacara', teacher: '' },
                    { subject: 'Informatika', teacher: 'Putri Fadillah' },
                    { subject: 'IPS Sejarah', teacher: 'Mariana, S.PD' },
                    { subject: 'IPS Sejarah', teacher: 'Mariana, S.PD' },
                    { subject: 'ISTIRAHAT 1', isBreak: true },
                    { subject: 'IPA Kimia', teacher: 'Annisa Wahyuliani, S.PD' },
                    { subject: 'IPA Kimia', teacher: 'Annisa Wahyuliani, S.PD' },
                    { subject: 'ISTIRAHAT 2', isBreak: true },
                    { subject: 'IPA Biologi', teacher: 'Indah Permata, S.PD' },
                    { subject: 'IPA Biologi', teacher: 'Indah Permata, S.PD' },
                    { subject: 'Tahfidz', teacher: 'Novita Prahesti, S.PD' },
                    { subject: 'Tahfidz', teacher: 'Novita Prahesti, S.PD' },
                    { subject: 'ISTIRAHAT 3', isBreak: true },
                    { subject: 'Al Qur\'an Hadist', teacher: 'Muhibbah, S.Ag' },
                    { subject: 'Al Qur\'an Hadist', teacher: 'Muhibbah, S.Ag' }
                ],
                // Selasa
                [
                    { subject: 'Bahasa Indonesia', teacher: 'Iin Parlina, S.PD' },
                    { subject: 'Bahasa Indonesia', teacher: 'Iin Parlina, S.PD' },
                    { subject: 'Pendidikan Pancasila PKN', teacher: 'Abda Rani Puspitasari, S.PD' },
                    { subject: 'Pendidikan Pancasila PKN', teacher: 'Abda Rani Puspitasari, S.PD' },
                    { subject: 'ISTIRAHAT 1', isBreak: true },
                    { subject: 'Sejarah', teacher: 'Amiratul Jannati, S.PD' },
                    { subject: 'Sejarah', teacher: 'Amiratul Jannati, S.PD' },
                    { subject: 'ISTIRAHAT 2', isBreak: true },
                    { subject: 'Informatika', teacher: 'Putri Fadillah' },
                    { subject: 'Matematika', teacher: 'Rizki Alam, S.PD' },
                    { subject: 'Matematika', teacher: 'Rizki Alam, S.PD' },
                    { subject: 'Matematika', teacher: 'Rizki Alam, S.PD' },
                    { subject: 'ISTIRAHAT 3', isBreak: true },
                    { subject: '', teacher: '' },
                    { subject: '', teacher: '' }
                ],
                // Rabu
                [
                    { subject: 'Sejarah Kebudayaan Islam SKI', teacher: 'Vika Mayasari, S.PD' },
                    { subject: 'Sejarah Kebudayaan Islam SKI', teacher: 'Vika Mayasari, S.PD' },
                    { subject: 'Bahasa Arab', teacher: 'Abdul Bari, S.PD.I' },
                    { subject: 'Bahasa Arab', teacher: 'Abdul Bari, S.PD.I' },
                    { subject: 'ISTIRAHAT 1', isBreak: true },
                    { subject: 'Akidah Akhlak', teacher: 'Norsam, S.Ag, M.PD.' },
                    { subject: 'Akidah Akhlak', teacher: 'Norsam, S.Ag, M.PD.' },
                    { subject: 'ISTIRAHAT 2', isBreak: true },
                    { subject: 'IPS Geografi', teacher: 'Indra, S.PD' },
                    { subject: 'IPS Geografi', teacher: 'Indra, S.PD' },
                    { subject: 'Fikih', teacher: 'Muhibbah, S.Ag' },
                    { subject: 'Fikih', teacher: 'Muhibbah, S.Ag' },
                    { subject: 'ISTIRAHAT 3', isBreak: true },
                    { subject: '', teacher: '' },
                    { subject: '', teacher: '' }
                ],
                // Kamis
                [
                    { subject: 'Bahasa Inggris', teacher: 'Mariya Ulfah, S.Pd.I' },
                    { subject: 'Bahasa Inggris', teacher: 'Mariya Ulfah, S.Pd.I' },
                    { subject: 'Bahasa Inggris', teacher: 'Mariya Ulfah, S.Pd.I' },
                    { subject: 'Bahasa Indonesia', teacher: 'Iin Parlina, S.Pd.' },
                    { subject: 'ISTIRAHAT 1', isBreak: true },
                    { subject: 'IPA Fisika', teacher: 'Indriana Wulansari, S.Pd' },
                    { subject: 'IPA Fisika', teacher: 'Indriana Wulansari, S.Pd' },
                    { subject: 'ISTIRAHAT 2', isBreak: true },
                    { subject: 'Seni Budaya', teacher: 'Isnawati, S.Pd' },
                    { subject: 'Seni Budaya', teacher: 'Isnawati, S.Pd' },
                    { subject: 'IPS Ekonomi', teacher: 'Rahmawati, S.E' },
                    { subject: 'IPS Ekonomi', teacher: 'Rahmawati, S.E' },
                    { subject: 'ISTIRAHAT 3', isBreak: true },
                    { subject: '', teacher: '' },
                    { subject: '', teacher: '' }
                ],
                // Jumat
                [
                    { subject: 'PJOK', teacher: 'Jemy Arisman, S.Pd' },
                    { subject: 'PJOK', teacher: 'Jemy Arisman, S.Pd' },
                    { subject: 'IPS Sosiologi', teacher: 'Muhammad' },
                    { subject: 'IPS Sosiologi', teacher: 'Muhammad' },
                    { subject: 'ISTIRAHAT 1', isBreak: true },
                    { subject: 'Bahasa Arab', teacher: 'Abdul Bari, S.Pd.I' },
                    { subject: 'Bahasa Arab', teacher: 'Abdul Bari, S.Pd.I' },
                    { subject: 'ISTIRAHAT 2', isBreak: true },
                    { subject: '', teacher: '' },
                    { subject: '', teacher: '' },
                    { subject: '', teacher: '' },
                    { subject: '', teacher: '' },
                    { subject: '', teacher: '' },
                    { subject: '', teacher: '' },
                    { subject: '', teacher: '' }
                ]
            ]
        };

        // Data mapping mata pelajaran dan guru
        const subjectTeacherMap = {
            'Senin': {
                'Informatika': 'Putri Fadillah',
                'IPS Sejarah': 'Mariana, S.PD',
                'IPA Kimia': 'Annisa Wahyuliani, S.PD',
                'IPA Biologi': 'Indah Permata, S.PD',
                'Tahfidz': 'Novita Prahesti, S.PD',
                'Al Qur\'an Hadist': 'Muhibbah, S.Ag'
            },
            'Selasa': {
                'Bahasa Indonesia': 'Iin Parlina, S.PD',
                'Pendidikan Pancasila PKN': 'Abda Rani Puspitasari, S.PD',
                'Sejarah': 'Amiratul Jannati, S.PD',
                'Informatika': 'Putri Fadillah',
                'Matematika': 'Rizki Alam, S.PD'
            },
            'Rabu': {
                'Sejarah Kebudayaan Islam SKI': 'Vika Mayasari, S.PD',
                'Bahasa Arab': 'Abdul Bari, S.PD.I',
                'Akidah Akhlak': 'Norsam, S.Ag, M.PD.',
                'IPS Geografi': 'Indra, S.PD',
                'Fikih': 'Muhibbah, S.Ag'
            },
            'Kamis': {
                'Bahasa Inggris': 'Mariya Ulfah, S.Pd.I',
                'Bahasa Indonesia': 'Iin Parlina, S.Pd.',
                'IPA Fisika': 'Indriana Wulansari, S.Pd',
                'Seni Budaya': 'Isnawati, S.Pd',
                'IPS Ekonomi': 'Rahmawati, S.E'
            },
            'Jumat': {
                'PJOK': 'Jemy Arisman, S.Pd',
                'IPS Sosiologi': 'Muhammad',
                'Bahasa Arab': 'Abdul Bari, S.Pd.I'
            }
        };

        let notificationTimeouts = {};

        // Inisialisasi aplikasi
        document.addEventListener('DOMContentLoaded', function() {
            initApp();
        });

        function initApp() {
            setupTabs();
            renderSchedule();
            setupDaySubjectMapping();
            setupEventListeners();
            loadTasks();
            setDefaultDateTime();
            checkNotificationPermission();
            
            console.log("Aplikasi siap digunakan!");
        }

        function setupTabs() {
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    
                    // Update active tab
                    tabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show active content
                    tabContents.forEach(content => content.classList.remove('active'));
                    document.getElementById(tabName).classList.add('active');
                });
            });
        }

        function renderSchedule() {
            const table = document.getElementById('classSchedule');
            let html = '<tr><th>Waktu</th>';
            
            // Header hari
            scheduleData.days.forEach(day => {
                html += `<th>${day}</th>`;
            });
            html += '</tr>';
            
            // Baris waktu dan mata pelajaran
            for (let i = 0; i < scheduleData.times.length; i++) {
                const time = scheduleData.times[i];
                const isBreak = time.includes('ISTIRAHAT');
                
                html += `<tr class="${isBreak ? 'break-row' : ''}">`;
                html += `<td class="${!isBreak ? 'time-header' : ''}">${time}</td>`;
                
                for (let j = 0; j < scheduleData.days.length; j++) {
                    const slot = scheduleData.subjects[j][i];
                    html += `<td class="subject-cell">`;
                    
                    if (slot && slot.subject) {
                        if (slot.isBreak) {
                            html += `<strong>${slot.subject}</strong>`;
                        } else {
                            html += `<div>${slot.subject}</div>`;
                            if (slot.teacher) {
                                html += `<div class="teacher-name">${slot.teacher}</div>`;
                            }
                        }
                    }
                    
                    html += `</td>`;
                }
                html += '</tr>';
            }
            
            table.innerHTML = html;
        }

        function setupDaySubjectMapping() {
            const daySelect = document.getElementById('day');
            const subjectSelect = document.getElementById('subject');
            
            daySelect.addEventListener('change', function() {
                updateSubjectOptions(this.value);
            });
            
            subjectSelect.addEventListener('change', function() {
                updateTeacher();
            });
            
            // Inisialisasi pertama
            updateSubjectOptions(daySelect.value);
        }

        function updateSubjectOptions(day) {
            const subjectSelect = document.getElementById('subject');
            subjectSelect.innerHTML = '<option value="">Pilih Mata Pelajaran</option>';
            
            if (day && subjectTeacherMap[day]) {
                Object.keys(subjectTeacherMap[day]).forEach(subject => {
                    const option = document.createElement('option');
                    option.value = subject;
                    option.textContent = subject;
                    subjectSelect.appendChild(option);
                });
            }
            
            document.getElementById('teacher').value = '';
        }

        function updateTeacher() {
            const day = document.getElementById('day').value;
            const subject = document.getElementById('subject').value;
            
            if (day && subject && subjectTeacherMap[day] && subjectTeacherMap[day][subject]) {
                document.getElementById('teacher').value = subjectTeacherMap[day][subject];
            } else {
                document.getElementById('teacher').value = '';
            }
        }

        function setupEventListeners() {
            // Form submit
            document.getElementById('taskForm').addEventListener('submit', function(e) {
                e.preventDefault();
                saveTask();
            });
            
            // Test notification button
            document.getElementById('testNotification').addEventListener('click', testNotification);
            
            // Tutorial button
            document.getElementById('tutorialBtn').addEventListener('click', showTutorial);
        }

        function checkNotificationPermission() {
            if (!("Notification" in window)) {
                updateNotificationStatus('not-supported');
                return;
            }
            
            if (Notification.permission === "granted") {
                updateNotificationStatus('granted');
            } else if (Notification.permission === "denied") {
                updateNotificationStatus('denied');
            } else {
                updateNotificationStatus('default');
            }
        }

        function requestNotificationPermission() {
            if (!("Notification" in window)) {
                alert("Browser ini tidak mendukung notifikasi desktop");
                return;
            }
            
            Notification.requestPermission().then(function(permission) {
                updateNotificationStatus(permission);
                
                if (permission === "granted") {
                    alert("âœ… Izin notifikasi diberikan! Sekarang Anda bisa menerima pengingat PR.");
                }
            });
        }

        function updateNotificationStatus(permission) {
            const statusElement = document.getElementById("notificationStatus");
            
            if (permission === "granted") {
                statusElement.innerHTML = '<i class="fas fa-bell"></i> <span>Notifikasi: Diizinkan</span>';
                statusElement.className = 'notification-status notification-enabled';
            } else if (permission === "denied") {
                statusElement.innerHTML = '<i class="fas fa-bell-slash"></i> <span>Notifikasi: Ditolak</span>';
                statusElement.className = 'notification-status notification-disabled';
            } else if (permission === "not-supported") {
                statusElement.innerHTML = '<i class="fas fa-bell-slash"></i> <span>Notifikasi: Tidak Didukung</span>';
                statusElement.className = 'notification-status notification-disabled';
            } else {
                statusElement.innerHTML = '<i class="fas fa-bell-slash"></i> <span>Notifikasi: Belum Diizinkan</span>';
                statusElement.className = 'notification-status notification-disabled';
            }
        }

        function testNotification() {
            if (Notification.permission !== "granted") {
                alert("Silakan izinkan notifikasi terlebih dahulu!");
                requestNotificationPermission();
                return;
            }
            
            const notification = new Notification("ðŸ§ª Test Notifikasi Berhasil!", {
                body: "Notifikasi PR Anda akan muncul seperti ini. Jika tidak muncul, periksa pengaturan browser Anda.",
                icon: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%233498db'%3E%3Cpath d='M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z'/%3E%3C/svg%3E",
                requireInteraction: true
            });
            
            setTimeout(() => {
                notification.close();
            }, 5000);
        }

        function saveTask() {
            const day = document.getElementById('day').value;
            const subject = document.getElementById('subject').value;
            const teacher = document.getElementById('teacher').value;
            const description = document.getElementById('taskDescription').value;
            const dueDate = document.getElementById('dueDate').value;
            const dueTime = document.getElementById('dueTime').value;
            const priority = document.getElementById('priority').value;
            const reminderTime = parseInt(document.getElementById('reminderTime').value);
            
            // Validasi
            if (!day || !subject || !description || !dueDate || !dueTime) {
                alert("Harap isi semua field yang wajib!");
                return;
            }
            
            const dueDateTime = new Date(`${dueDate}T${dueTime}`);
            if (dueDateTime <= new Date()) {
                alert("Waktu pengumpulan harus di masa depan!");
                return;
            }
            
            // Buat task
            const task = {
                id: Date.now(),
                day,
                subject,
                teacher,
                description,
                dueDate: dueDateTime.toISOString(),
                priority,
                reminderTime,
                createdAt: new Date().toISOString()
            };
            
            // Simpan ke localStorage
            saveTaskToStorage(task);
            
            // Jadwalkan notifikasi
            scheduleNotification(task);
            
            // Reset form
            document.getElementById('taskForm').reset();
            updateSubjectOptions(document.getElementById('day').value);
            
            // Set default waktu
            setDefaultDateTime();
            
            // Refresh daftar
            loadTasks();
            
            alert("âœ… PR berhasil disimpan! Notifikasi akan muncul " + reminderTime + " menit sebelum waktu pengumpulan.");
        }

        function saveTaskToStorage(task) {
            const tasks = getTasksFromStorage();
            tasks.push(task);
            localStorage.setItem("prTasks", JSON.stringify(tasks));
        }

        function getTasksFromStorage() {
            return JSON.parse(localStorage.getItem("prTasks")) || [];
        }

        function scheduleNotification(task) {
            if (Notification.permission !== "granted") {
                console.log("Izin notifikasi belum diberikan");
                return;
            }
            
            const dueDate = new Date(task.dueDate);
            const reminderTime = new Date(dueDate.getTime() - (task.reminderTime * 60 * 1000));
            const now = new Date();
            const timeUntilReminder = reminderTime - now;
            
            console.log("Menjadwalkan notifikasi:", {
                task: task.subject,
                dueDate: dueDate.toLocaleString(),
                reminderTime: reminderTime.toLocaleString(),
                timeUntilReminder: Math.round(timeUntilReminder / 1000) + " detik"
            });
            
            if (timeUntilReminder <= 0) {
                console.log("Waktu notifikasi sudah lewat");
                return;
            }
            
            const timeoutId = setTimeout(() => {
                console.log("Menampilkan notifikasi untuk:", task.subject);
                
                const notification = new Notification(`ðŸ“š Pengingat PR: ${task.subject}`, {
                    body: `PR "${task.subject}" harus dikumpulkan pada ${dueDate.toLocaleDateString('id-ID')} pukul ${dueDate.toLocaleTimeString('id-ID', {hour: '2-digit', minute:'2-digit'})}\n\nDetail: ${task.description}`,
                    icon: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23e74c3c'%3E%3Cpath d='M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z'/%3E%3C/svg%3E",
                    requireInteraction: true,
                    tag: `pr-reminder-${task.id}`
                });
                
                setTimeout(() => {
                    notification.close();
                }, 10000);
                
                delete notificationTimeouts[task.id];
                
            }, timeUntilReminder);
            
            notificationTimeouts[task.id] = timeoutId;
        }

        function loadTasks() {
            const tasks = getTasksFromStorage();
            const taskList = document.getElementById('taskList');
            
            if (tasks.length === 0) {
                taskList.innerHTML = `
                    <li class="empty-state">
                        <i class="fas fa-inbox"></i>
                        <h3>Belum ada PR</h3>
                        <p>Tambahkan PR pertama Anda untuk memulai</p>
                    </li>
                `;
                updateStats();
                return;
            }
            
            taskList.innerHTML = '';
            
            tasks.forEach(task => {
                const dueDate = new Date(task.dueDate);
                const now = new Date();
                const isToday = dueDate.toDateString() === now.toDateString();
                
                let priorityBadge = '';
                let priorityClass = '';
                
                if (task.priority === 'urgent') {
                    priorityBadge = '<span class="badge badge-danger">Mendesak</span>';
                    priorityClass = 'urgent';
                } else if (task.priority === 'soon') {
                    priorityBadge = '<span class="badge badge-warning">Segera</span>';
                    priorityClass = 'soon';
                } else {
                    priorityBadge = '<span class="badge badge-primary">Normal</span>';
                }
                
                const taskElement = document.createElement('li');
                taskElement.className = `task-item ${priorityClass} ${isToday ? 'today-highlight' : ''}`;
                taskElement.innerHTML = `
                    <div class="task-info">
                        <h3>${task.subject} ${priorityBadge}</h3>
                        <div class="task-meta">
                            <span><i class="fas fa-calendar-day"></i> ${task.day}</span>
                            <span><i class="fas fa-chalkboard-teacher"></i> ${task.teacher}</span>
                            <span><i class="fas fa-clock"></i> ${dueDate.toLocaleDateString('id-ID')} ${dueDate.toLocaleTimeString('id-ID', {hour: '2-digit', minute:'2-digit'})}</span>
                            ${isToday ? '<span class="badge badge-warning"><i class="fas fa-exclamation-circle"></i> Hari Ini!</span>' : ''}
                        </div>
                        <div class="pr-details">
                            <strong>Detail Tugas:</strong> ${task.description}
                        </div>
                    </div>
                    <div class="task-actions">
                        <button class="btn btn-delete" onclick="deleteTask(${task.id})">
                            <i class="fas fa-trash"></i> Hapus
                        </button>
                    </div>
                `;
                taskList.appendChild(taskElement);
            });
            
            updateStats();
        }

        function deleteTask(taskId) {
            if (!confirm("Apakah Anda yakin ingin menghapus PR ini?")) {
                return;
            }
            
            if (notificationTimeouts[taskId]) {
                clearTimeout(notificationTimeouts[taskId]);
                delete notificationTimeouts[taskId];
            }
            
            const tasks = getTasksFromStorage().filter(task => task.id !== taskId);
            localStorage.setItem("prTasks", JSON.stringify(tasks));
            
            loadTasks();
            
            alert("PR berhasil dihapus!");
        }

        function updateStats() {
            const tasks = getTasksFromStorage();
            const today = new Date();
            const todayString = today.toDateString();
            
            const totalTasks = tasks.length;
            const urgentTasks = tasks.filter(task => task.priority === 'urgent').length;
            const todayTasks = tasks.filter(task => {
                const dueDate = new Date(task.dueDate);
                return dueDate.toDateString() === todayString;
            }).length;
            
            document.getElementById('totalTasks').textContent = totalTasks;
            document.getElementById('urgentTasks').textContent = urgentTasks;
            document.getElementById('todayTasks').textContent = todayTasks;
        }

        function setDefaultDateTime() {
            const now = new Date();
            now.setMinutes(now.getMinutes() + 2);
            
            document.getElementById('dueDate').value = now.toISOString().split('T')[0];
            document.getElementById('dueTime').value = now.toTimeString().substring(0, 5);
        }

        function showTutorial() {
            alert("CARA MENGGUNAKAN:\n\n1. Izinkan notifikasi ketika diminta\n2. Tes notifikasi dengan tombol 'Tes Notifikasi'\n3. Tambah PR dengan form di tab 'Pengingat PR'\n4. Pilih '1 menit' atau '2 menit' untuk testing cepat\n5. Notifikasi akan muncul sesuai pengaturan");
        }

        // Global functions untuk onclick
        window.requestNotificationPermission = requestNotificationPermission;
        window.testNotification = testNotification;
        window.deleteTask = deleteTask;
        window.showTutorial = showTutorial;
    </script>
</body>
</html>
