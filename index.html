<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PR Manager - MAN BARITO UTARA</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #f72585;
            --success: #4cc9f0;
            --warning: #f8961e;
            --danger: #e63946;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            background: white;
            color: var(--primary);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 25px;
            text-align: center;
        }

        .school-info h1 {
            font-size: 2rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .school-info p {
            color: #666;
            font-size: 1.1rem;
        }

        .header-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .notification-status {
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .notification-enabled {
            background: rgba(76, 201, 240, 0.2);
            color: var(--success);
        }

        .notification-disabled {
            background: rgba(230, 57, 70, 0.2);
            color: var(--danger);
        }

        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .tabs {
            display: flex;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .tab {
            flex: 1;
            text-align: center;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .tab.active {
            background: var(--primary);
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 25px;
        }

        h2 {
            color: var(--primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        textarea {
            min-height: 80px;
            resize: vertical;
        }

        .btn-submit {
            background: var(--primary);
            width: 100%;
            padding: 15px;
            font-size: 1.1rem;
            margin-top: 10px;
        }

        .task-list {
            list-style: none;
        }

        .task-item {
            background: #f8f9fa;
            border-left: 4px solid var(--primary);
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .task-info h3 {
            margin-bottom: 5px;
        }

        .task-meta {
            font-size: 0.9rem;
            color: #666;
        }

        .task-actions {
            display: flex;
            gap: 10px;
        }

        .btn-delete {
            background: var(--danger);
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .urgent {
            border-left-color: var(--danger);
        }

        .soon {
            border-left-color: var(--warning);
        }

        .schedule-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .schedule-table th, .schedule-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
        }

        .schedule-table th {
            background: var(--primary);
            color: white;
        }

        .schedule-table tr:nth-child(even) {
            background: #f8f9fa;
        }

        .break-row {
            background: #e9ecef !important;
            font-weight: bold;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            color: white;
            padding: 20px;
        }

        @media (max-width: 768px) {
            .task-item {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .task-actions {
                margin-top: 15px;
                width: 100%;
                justify-content: flex-end;
            }
            
            .tabs {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="school-info">
                <h1>
                    <i class="fas fa-graduation-cap"></i>
                    MAN BARITO UTARA
                </h1>
                <p>Kelas X.9 ATAS - Semester 1 TP 2025/2026</p>
                
                <div class="header-controls">
                    <div id="notificationStatus" class="notification-status notification-disabled">
                        <i class="fas fa-bell"></i> 
                        <span>Notifikasi: Belum Diizinkan</span>
                    </div>
                    
                    <button id="testNotification" class="btn btn-outline">
                        <i class="fas fa-bell"></i> Tes Notifikasi
                    </button>
                </div>
            </div>
        </header>

        <div class="tabs">
            <div class="tab active" onclick="switchTab('schedule')">
                <i class="fas fa-calendar-alt"></i> Jadwal Pelajaran
            </div>
            <div class="tab" onclick="switchTab('reminder')">
                <i class="fas fa-tasks"></i> Pengingat PR
            </div>
        </div>

        <div id="schedule" class="tab-content active">
            <div class="card">
                <h2><i class="fas fa-table"></i> Jadwal Pelajaran</h2>
                <div style="overflow-x: auto;">
                    <table class="schedule-table" id="classSchedule">
                        <!-- Jadwal akan diisi oleh JavaScript -->
                    </table>
                </div>
            </div>
        </div>

        <div id="reminder" class="tab-content">
            <div class="card">
                <h2><i class="fas fa-plus-circle"></i> Tambah PR Baru</h2>
                <form id="taskForm">
                    <div class="form-group">
                        <label for="day"><i class="fas fa-calendar-day"></i> Hari</label>
                        <select id="day" required onchange="updateSubjects()">
                            <option value="">Pilih Hari</option>
                            <option value="Senin">Senin</option>
                            <option value="Selasa">Selasa</option>
                            <option value="Rabu">Rabu</option>
                            <option value="Kamis">Kamis</option>
                            <option value="Jumat">Jumat</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="subject"><i class="fas fa-book"></i> Mata Pelajaran</label>
                        <select id="subject" required onchange="updateTeacher()">
                            <option value="">Pilih Mata Pelajaran</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="teacher"><i class="fas fa-chalkboard-teacher"></i> Nama Guru</label>
                        <input type="text" id="teacher" readonly>
                    </div>
                    
                    <div class="form-group">
                        <label for="taskDescription"><i class="fas fa-clipboard-list"></i> Detail Tugas</label>
                        <textarea id="taskDescription" placeholder="Contoh: Mengerjakan soal halaman 1-5, membuat rangkuman bab 2, dll." required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="dueDate"><i class="fas fa-calendar-check"></i> Tanggal Pengumpulan</label>
                        <input type="date" id="dueDate" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="dueTime"><i class="fas fa-clock"></i> Waktu Pengumpulan</label>
                        <input type="time" id="dueTime" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="priority"><i class="fas fa-exclamation-circle"></i> Prioritas</label>
                        <select id="priority">
                            <option value="normal">Normal</option>
                            <option value="soon">Segera</option>
                            <option value="urgent">Mendesak</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="reminderTime"><i class="fas fa-bell"></i> Ingatkan Saya</label>
                        <select id="reminderTime">
                            <option value="2">2 menit (testing)</option>
                            <option value="15">15 menit sebelumnya</option>
                            <option value="30">30 menit sebelumnya</option>
                            <option value="60">1 jam sebelumnya</option>
                        </select>
                    </div>
                    
                    <button type="submit" class="btn btn-submit">
                        <i class="fas fa-plus"></i> Tambah Pengingat PR
                    </button>
                </form>
            </div>
            
            <div class="card">
                <h2><i class="fas fa-list-check"></i> Daftar PR Saya</h2>
                <ul id="taskList" class="task-list">
                    <li class="empty-state">
                        <i class="fas fa-inbox"></i>
                        <h3>Belum ada PR</h3>
                        <p>Tambahkan PR pertama Anda untuk memulai</p>
                    </li>
                </ul>
            </div>
        </div>
        
        <footer>
            <p><i class="fas fa-copyright"></i> 2025 MAN BARITO UTARA - Aplikasi Pengingat PR & Jadwal Pelajaran</p>
        </footer>
    </div>

    <script>
        // Data jadwal pelajaran
        const scheduleData = {
            days: ['Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat'],
            times: ['06:30-07:15', '07:15-08:00', '08:00-08:45', '08:45-09:30', '09:30-09:45', '09:45-10:30', '10:30-11:15', '11:15-11:30', '11:30-12:15', '12:15-13:00', '13:00-13:45', '13:45-14:30', '14:30-14:45', '14:45-15:30', '15:30-16:15'],
            subjects: [
                // Senin
                ['Upacara', 'Informatika', 'IPS Sejarah', 'IPS Sejarah', 'ISTIRAHAT 1', 'IPA Kimia', 'IPA Kimia', 'ISTIRAHAT 2', 'IPA Biologi', 'IPA Biologi', 'Tahfidz', 'Tahfidz', 'ISTIRAHAT 3', 'Al Qur\'an Hadist', 'Al Qur\'an Hadist'],
                // Selasa
                ['Bahasa Indonesia', 'Bahasa Indonesia', 'Pendidikan Pancasila PKN', 'Pendidikan Pancasila PKN', 'ISTIRAHAT 1', 'Sejarah', 'Sejarah', 'ISTIRAHAT 2', 'Informatika', 'Matematika', 'Matematika', 'Matematika', 'ISTIRAHAT 3', '', ''],
                // Rabu
                ['Sejarah Kebudayaan Islam SKI', 'Sejarah Kebudayaan Islam SKI', 'Bahasa Arab', 'Bahasa Arab', 'ISTIRAHAT 1', 'Akidah Akhlak', 'Akidah Akhlak', 'ISTIRAHAT 2', 'IPS Geografi', 'IPS Geografi', 'Fikih', 'Fikih', 'ISTIRAHAT 3', '', ''],
                // Kamis
                ['Bahasa Inggris', 'Bahasa Inggris', 'Bahasa Inggris', 'Bahasa Indonesia', 'ISTIRAHAT 1', 'IPA Fisika', 'IPA Fisika', 'ISTIRAHAT 2', 'Seni Budaya', 'Seni Budaya', 'IPS Ekonomi', 'IPS Ekonomi', 'ISTIRAHAT 3', '', ''],
                // Jumat
                ['PJOK', 'PJOK', 'IPS Sosiologi', 'IPS Sosiologi', 'ISTIRAHAT 1', 'Bahasa Arab', 'Bahasa Arab', 'ISTIRAHAT 2', '', '', '', '', '', '', '']
            ],
            teachers: [
                // Senin
                ['', 'Putri Fadillah', 'Mariana, S.PD', 'Mariana, S.PD', '', 'Annisa Wahyuliani, S.PD', 'Annisa Wahyuliani, S.PD', '', 'Indah Permata, S.PD', 'Indah Permata, S.PD', 'Novita Prahesti, S.PD', 'Novita Prahesti, S.PD', '', 'Muhibbah, S.Ag', 'Muhibbah, S.Ag'],
                // Selasa
                ['Iin Parlina, S.PD', 'Iin Parlina, S.PD', 'Abda Rani Puspitasari, S.PD', 'Abda Rani Puspitasari, S.PD', '', 'Amiratul Jannati, S.PD', 'Amiratul Jannati, S.PD', '', 'Putri Fadillah', 'Rizki Alam, S.PD', 'Rizki Alam, S.PD', 'Rizki Alam, S.PD', '', '', ''],
                // Rabu
                ['Vika Mayasari, S.PD', 'Vika Mayasari, S.PD', 'Abdul Bari, S.PD.I', 'Abdul Bari, S.PD.I', '', 'Norsam, S.Ag, M.PD.', 'Norsam, S.Ag, M.PD.', '', 'Indra, S.PD', 'Indra, S.PD', 'Muhibbah, S.Ag', 'Muhibbah, S.Ag', '', '', ''],
                // Kamis
                ['Mariya Ulfah, S.Pd.I', 'Mariya Ulfah, S.Pd.I', 'Mariya Ulfah, S.Pd.I', 'Iin Parlina, S.Pd.', '', 'Indriana Wulansari, S.Pd', 'Indriana Wulansari, S.Pd', '', 'Isnawati, S.Pd', 'Isnawati, S.Pd', 'Rahmawati, S.E', 'Rahmawati, S.E', '', '', ''],
                // Jumat
                ['Jemy Arisman, S.Pd', 'Jemy Arisman, S.Pd', 'Muhammad', 'Muhammad', '', 'Abdul Bari, S.Pd.I', 'Abdul Bari, S.Pd.I', '', '', '', '', '', '', '', '']
            ]
        };

        // Data mapping mata pelajaran dan guru
        const subjectTeacherMap = {
            'Senin': {
                'Informatika': 'Putri Fadillah',
                'IPS Sejarah': 'Mariana, S.PD',
                'IPA Kimia': 'Annisa Wahyuliani, S.PD',
                'IPA Biologi': 'Indah Permata, S.PD',
                'Tahfidz': 'Novita Prahesti, S.PD',
                'Al Qur\'an Hadist': 'Muhibbah, S.Ag'
            },
            'Selasa': {
                'Bahasa Indonesia': 'Iin Parlina, S.PD',
                'Pendidikan Pancasila PKN': 'Abda Rani Puspitasari, S.PD',
                'Sejarah': 'Amiratul Jannati, S.PD',
                'Informatika': 'Putri Fadillah',
                'Matematika': 'Rizki Alam, S.PD'
            },
            'Rabu': {
                'Sejarah Kebudayaan Islam SKI': 'Vika Mayasari, S.PD',
                'Bahasa Arab': 'Abdul Bari, S.PD.I',
                'Akidah Akhlak': 'Norsam, S.Ag, M.PD.',
                'IPS Geografi': 'Indra, S.PD',
                'Fikih': 'Muhibbah, S.Ag'
            },
            'Kamis': {
                'Bahasa Inggris': 'Mariya Ulfah, S.Pd.I',
                'Bahasa Indonesia': 'Iin Parlina, S.Pd.',
                'IPA Fisika': 'Indriana Wulansari, S.Pd',
                'Seni Budaya': 'Isnawati, S.Pd',
                'IPS Ekonomi': 'Rahmawati, S.E'
            },
            'Jumat': {
                'PJOK': 'Jemy Arisman, S.Pd',
                'IPS Sosiologi': 'Muhammad',
                'Bahasa Arab': 'Abdul Bari, S.Pd.I'
            }
        };

        let notificationTimeouts = {};

        // Fungsi untuk mengganti tab
        function switchTab(tabName) {
            // Sembunyikan semua tab content
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Tampilkan tab yang dipilih
            document.getElementById(tabName).classList.add('active');
            
            // Update tab navigation
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
            
            // Jika tab jadwal, render ulang jadwal
            if (tabName === 'schedule') {
                renderSchedule();
            }
        }

        // Render jadwal pelajaran
        function renderSchedule() {
            const table = document.getElementById('classSchedule');
            let html = '<tr><th>Waktu</th>';
            
            // Header hari
            scheduleData.days.forEach(day => {
                html += `<th>${day}</th>`;
            });
            html += '</tr>';
            
            // Baris waktu dan mata pelajaran
            for (let i = 0; i < scheduleData.times.length; i++) {
                const isBreak = scheduleData.times[i].includes('ISTIRAHAT');
                html += `<tr class="${isBreak ? 'break-row' : ''}">`;
                html += `<td>${scheduleData.times[i]}</td>`;
                
                for (let j = 0; j < scheduleData.days.length; j++) {
                    const subject = scheduleData.subjects[j][i];
                    const teacher = scheduleData.teachers[j][i];
                    html += `<td>`;
                    if (subject) {
                        html += `<div>${subject}</div>`;
                        if (teacher) {
                            html += `<div style="font-size:0.8rem;color:#666;">${teacher}</div>`;
                        }
                    }
                    html += `</td>`;
                }
                html += '</tr>';
            }
            
            table.innerHTML = html;
        }

        // Update pilihan mata pelajaran berdasarkan hari
        function updateSubjects() {
            const day = document.getElementById('day').value;
            const subjectSelect = document.getElementById('subject');
            
            subjectSelect.innerHTML = '<option value="">Pilih Mata Pelajaran</option>';
            
            if (day && subjectTeacherMap[day]) {
                for (const subject in subjectTeacherMap[day]) {
                    const option = document.createElement('option');
                    option.value = subject;
                    option.textContent = subject;
                    subjectSelect.appendChild(option);
                }
            }
            
            document.getElementById('teacher').value = '';
        }

        // Update nama guru berdasarkan mata pelajaran
        function updateTeacher() {
            const day = document.getElementById('day').value;
            const subject = document.getElementById('subject').value;
            
            if (day && subject && subjectTeacherMap[day] && subjectTeacherMap[day][subject]) {
                document.getElementById('teacher').value = subjectTeacherMap[day][subject];
            } else {
                document.getElementById('teacher').value = '';
            }
        }

        // Minta izin notifikasi
        function requestNotificationPermission() {
            if ('Notification' in window) {
                Notification.requestPermission().then(permission => {
                    const status = document.getElementById('notificationStatus');
                    if (permission === 'granted') {
                        status.innerHTML = '<i class="fas fa-bell"></i> <span>Notifikasi: Diizinkan</span>';
                        status.className = 'notification-status notification-enabled';
                    } else {
                        status.innerHTML = '<i class="fas fa-bell-slash"></i> <span>Notifikasi: Belum Diizinkan</span>';
                        status.className = 'notification-status notification-disabled';
                    }
                });
            }
        }

        // Setup form
        function setupForm() {
            const form = document.getElementById('taskForm');
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const day = document.getElementById('day').value;
                const subject = document.getElementById('subject').value;
                const teacher = document.getElementById('teacher').value;
                const description = document.getElementById('taskDescription').value;
                const dueDate = document.getElementById('dueDate').value;
                const dueTime = document.getElementById('dueTime').value;
                const priority = document.getElementById('priority').value;
                const reminderTime = parseInt(document.getElementById('reminderTime').value);
                
                // Validasi
                if (!day || !subject || !description || !dueDate || !dueTime) {
                    alert('Harap isi semua field yang wajib!');
                    return;
                }
                
                const dueDateTime = new Date(`${dueDate}T${dueTime}`);
                if (dueDateTime <= new Date()) {
                    alert('Tanggal dan waktu pengumpulan harus di masa depan!');
                    return;
                }
                
                // Buat task
                const task = {
                    id: Date.now(),
                    day,
                    subject,
                    teacher,
                    description,
                    dueDate: dueDateTime.toISOString(),
                    priority,
                    reminderTime
                };
                
                // Simpan dan jadwalkan notifikasi
                saveTask(task);
                scheduleNotification(task);
                
                // Reset form
                form.reset();
                updateSubjects();
                
                // Muat ulang daftar
                loadTasks();
                
                alert('PR berhasil ditambahkan!');
            });
        }

        // Simpan task
        function saveTask(task) {
            const tasks = getTasks();
            tasks.push(task);
            localStorage.setItem('schoolTasks', JSON.stringify(tasks));
        }

        // Ambil tasks
        function getTasks() {
            return JSON.parse(localStorage.getItem('schoolTasks')) || [];
        }

        // Muat tasks
        function loadTasks() {
            const tasks = getTasks();
            const taskList = document.getElementById('taskList');
            
            if (tasks.length === 0) {
                taskList.innerHTML = `
                    <li class="empty-state">
                        <i class="fas fa-inbox"></i>
                        <h3>Belum ada PR</h3>
                        <p>Tambahkan PR pertama Anda untuk memulai</p>
                    </li>
                `;
                return;
            }
            
            taskList.innerHTML = '';
            tasks.forEach(task => {
                const dueDate = new Date(task.dueDate);
                const li = document.createElement('li');
                li.className = `task-item ${task.priority === 'urgent' ? 'urgent' : task.priority === 'soon' ? 'soon' : ''}`;
                li.innerHTML = `
                    <div class="task-info">
                        <h3>${task.subject} - ${task.day}</h3>
                        <div class="task-meta">
                            <strong>Guru:</strong> ${task.teacher} | 
                            <strong>Batas:</strong> ${dueDate.toLocaleDateString('id-ID')} ${dueDate.toLocaleTimeString('id-ID', {hour: '2-digit', minute:'2-digit'})}
                        </div>
                        <div style="margin-top:8px; padding:8px; background:#f0f0f0; border-radius:5px;">
                            <strong>Detail:</strong> ${task.description}
                        </div>
                    </div>
                    <div class="task-actions">
                        <button class="btn btn-delete" onclick="deleteTask(${task.id})">
                            <i class="fas fa-trash"></i> Hapus
                        </button>
                    </div>
                `;
                taskList.appendChild(li);
            });
        }

        // Hapus task
        function deleteTask(taskId) {
            if (confirm('Hapus PR ini?')) {
                if (notificationTimeouts[taskId]) {
                    clearTimeout(notificationTimeouts[taskId]);
                    delete notificationTimeouts[taskId];
                }
                
                const tasks = getTasks().filter(task => task.id !== taskId);
                localStorage.setItem('schoolTasks', JSON.stringify(tasks));
                loadTasks();
            }
        }

        // Jadwalkan notifikasi
        function scheduleNotification(task) {
            if (Notification.permission !== 'granted') return;
            
            const dueDate = new Date(task.dueDate);
            const reminderTime = new Date(dueDate.getTime() - (task.reminderTime * 60 * 1000));
            const now = new Date();
            const timeUntilReminder = reminderTime - now;
            
            if (timeUntilReminder <= 0) return;
            
            const timeoutId = setTimeout(() => {
                new Notification(`Pengingat PR: ${task.subject}`, {
                    body: `PR ${task.subject} harus dikumpulkan pada ${dueDate.toLocaleDateString('id-ID')} ${dueDate.toLocaleTimeString('id-ID', {hour: '2-digit', minute:'2-digit'})}. Detail: ${task.description}`,
                    icon: '/favicon.ico'
                });
                delete notificationTimeouts[task.id];
            }, timeUntilReminder);
            
            notificationTimeouts[task.id] = timeoutId;
        }

        // Setup test notification
        function setupTestNotification() {
            document.getElementById('testNotification').addEventListener('click', function() {
                if (Notification.permission === 'granted') {
                    new Notification('Tes Notifikasi', {
                        body: 'Ini adalah tes notifikasi. Notifikasi PR akan muncul seperti ini.',
                        icon: '/favicon.ico'
                    });
                } else {
                    requestNotificationPermission();
                }
            });
        }

        // Set default datetime
        function setDefaultDateTime() {
            const now = new Date();
            now.setMinutes(now.getMinutes() + 2);
            
            document.getElementById('dueDate').value = new Date().toISOString().split('T')[0];
            document.getElementById('dueTime').value = now.toTimeString().substring(0, 5);
        }

        // Inisialisasi aplikasi
        function initApp() {
            renderSchedule();
            requestNotificationPermission();
            setupForm();
            setupTestNotification();
            loadTasks();
            setDefaultDateTime();
            
            // Setup hari pertama
            updateSubjects();
        }

        // Jalankan aplikasi saat halaman dimuat
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
